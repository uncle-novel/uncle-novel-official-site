(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{343:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"xpath规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xpath规则"}},[t._v("#")]),t._v(" Xpath规则")]),t._v(" "),s("p",[t._v("Xpath基于"),s("a",{attrs:{href:"https://github.com/zhegexiaohuozi/JsoupXpath",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsoupXpath"),s("OutboundLink")],1),t._v("，一个纯Java实现的支持W3C Xpath 1.0标准语法的HTML解析器。")]),t._v(" "),s("p",[t._v("如果规则以 "),s("code",[t._v("//")]),t._v(" 开头则可以省略不写type。")]),t._v(" "),s("p",[t._v("在调试时，可以使用浏览器插件XPath Helper，Chrome浏览器XPath Helper的插件"),s("a",{attrs:{href:"https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),s("p",[t._v("使用JsoupXpath时如果发现自己写的在XPath Helper中能够正确取值，但是在规则中无法取到")]),t._v(" "),s("ul",[s("li",[t._v("查看是否为xpath1.0语法")]),t._v(" "),s("li",[t._v("在"),s("a",{attrs:{href:"https://github.com/zhegexiaohuozi/JsoupXpath/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsoupXpath Issues"),s("OutboundLink")],1),t._v("中查看是否已解决")])]),t._v(" "),s("h3",{attrs:{id:"一些函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一些函数"}},[t._v("#")]),t._v(" 一些函数")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("allText()")]),t._v("提取节点下全部文本，取代类似 "),s("code",[t._v("//div/h3//text()")]),t._v("这种递归取文本用法")]),t._v(" "),s("li",[s("code",[t._v("html()")]),t._v("获取全部节点的内部的html")]),t._v(" "),s("li",[s("code",[t._v("outerHtml()")]),t._v("获取全部节点的 包含节点本身在内的全部html")]),t._v(" "),s("li",[s("code",[t._v("num()")]),t._v("抽取节点自有文本中全部数字，如果知道节点的自有文本(即非子代节点所包含的文本)中只存在一个数字，如阅读数，评论数，价格等那么直接可以直接提取此数字出来。如果有多个数字将提取第一个匹配的连续数字。")]),t._v(" "),s("li",[s("code",[t._v("text()")]),t._v(" 提取节点的自有文本。更多介绍可参见 "),s("a",{attrs:{href:"https://github.com/zhegexiaohuozi/JsoupXpath/releases/tag/v2.4.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("releases/tag/v2.4.1"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("node()")]),t._v(" 提取所有节点")]),t._v(" "),s("li",[s("code",[t._v("int position()")]),t._v(" 返回当前节点在其所在上下文中的位置")]),t._v(" "),s("li",[s("code",[t._v("int last()")]),t._v(" 返回所在上下文的最后那个节点位置")]),t._v(" "),s("li",[s("code",[t._v("int first()")]),t._v(" 返回所在上下文的的第一个节点位置")]),t._v(" "),s("li",[s("code",[t._v("string concat(string, string, string*)")]),t._v(" 连接若干字符串")]),t._v(" "),s("li",[s("code",[t._v("boolean contains(string, string)")]),t._v(" 判断第一个字符串是否包含第二个")]),t._v(" "),s("li",[s("code",[t._v("int count(node-set)")]),t._v(" 计算给定的节点集合中节点个数")]),t._v(" "),s("li",[s("code",[t._v("boolean starts-with(string, string)")]),t._v(" 判断第一个字符串是否以第二个开头")]),t._v(" "),s("li",[s("code",[t._v("string substring(string, number, number?)")]),t._v(' 第一个参数指定字符串，第二个指定起始位置（xpath索引都是从1开始），第三指定要截取的长度，这里要注意在xpath的语法里这，不是结束的位置。substring("12345", 2, 3) returns "234"')])]),t._v(" "),s("h3",{attrs:{id:"常用操作符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用操作符"}},[t._v("#")]),t._v(" 常用操作符")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MINUS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PLUS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMA")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIPE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'|'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LESS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MORE_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'>='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("START_WITH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'^='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `a^=b` 字符串a以字符串b开头 a startwith b  （JsoupXpath扩展）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("END_WITH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `a*=b` a包含b, a contains b   （JsoupXpath扩展）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONTAIN_WITH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a包含b, a contains b  （JsoupXpath扩展）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGEXP_WITH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'~='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的内容符合 正则表达式b   （JsoupXpath扩展）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGEXP_NOT_WITH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'!~'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//a的内容不符合 正则表达式b   （JsoupXpath扩展）")]),t._v("\n")])])]),s("h3",{attrs:{id:"写法举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写法举例"}},[t._v("#")]),t._v(" 写法举例")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('//*[@id="app"]/div[1]/aside/ul/li[1]/section/ul/li[2]/a@href\n')])])]),s("h2",{attrs:{id:"css选择器规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css选择器规则"}},[t._v("#")]),t._v(" Css选择器规则")]),t._v(" "),s("p",[t._v("一些使用教程可以查看")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.w3school.com.cn/cssref/css_selectors.asp",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS 选择器参考手册 - w3school 在线教程"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"相关拓展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关拓展"}},[t._v("#")]),t._v(" 相关拓展")]),t._v(" "),s("p",[t._v("在软件的规则解析器中，对CSS选择器语法进行了拓展，支持直接选择属性，使用 @属性名 的方式")]),t._v(" "),s("ul",[s("li",[t._v("text 选择文本")]),t._v(" "),s("li",[t._v("ownText 选择自己标题的文本")]),t._v(" "),s("li",[t._v("其他属性直接 @属性名 即可")])]),t._v(" "),s("h3",{attrs:{id:"写法举例-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写法举例-2"}},[t._v("#")]),t._v(" 写法举例")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- HTML --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(".content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("_attr")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("我是一个属性"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是一段文字"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ol",[s("li",[t._v("选择对应标签的文本")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".content p@text  得到 “我是一段文字内容”\n.content p@ownText 得到 “我是一段文字”\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("选择任意的属性值")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 规则 --\x3e")]),t._v("\n.content p@_attr 得到 “我是一个属性”\n")])])]),s("h2",{attrs:{id:"正则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#正则"}},[t._v("#")]),t._v(" 正则")]),t._v(" "),s("p",[t._v("支持分组选择，采用 "),s("code",[t._v("##")]),t._v(" 分割正则与分组，$1代表第一组，$2代表第二组，类推。")]),t._v(" "),s("p",[t._v("使用正则必须带有前缀"),s("code",[t._v("regex:")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 匹配目标")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2013")]),t._v("年"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("月 \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应正则规则")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("regex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("年")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("月##$1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("$2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2013")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])])]),s("h2",{attrs:{id:"jsonpath规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsonpath规则"}},[t._v("#")]),t._v(" JsonPath规则")]),t._v(" "),s("p",[t._v("JsonPath规则实现基于"),s("a",{attrs:{href:"https://github.com/json-path/JsonPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonPath"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("如果规则以 "),s("code",[t._v("$.")]),t._v(" 开头则可以省略不写type字段")]),t._v(" "),s("p",[t._v("基本用法如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"store"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"book"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"category"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reference"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Nigel Rees"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sayings of the Century"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.95")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 规则")]),t._v("\n$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("book"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结果")]),t._v("\nNigel Rees\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);