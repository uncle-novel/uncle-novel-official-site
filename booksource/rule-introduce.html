<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>四种规则写法 | 📚Uncle小说</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Uncle小说官网 Uncle小说V5.0 一个全网小说下载器">
    <meta baidu="baidu-site-verification" content="code-JufzRAnClF">
    
    <link rel="preload" href="/uncle-novel-official-site/assets/css/0.styles.fa820ce7.css" as="style"><link rel="preload" href="/uncle-novel-official-site/assets/js/app.36db7c0a.js" as="script"><link rel="preload" href="/uncle-novel-official-site/assets/js/2.705b7372.js" as="script"><link rel="preload" href="/uncle-novel-official-site/assets/js/1.527d975e.js" as="script"><link rel="preload" href="/uncle-novel-official-site/assets/js/29.5c8746bb.js" as="script"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/10.0fd22071.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/11.190fb976.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/12.1883afcc.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/13.1031ca59.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/14.eb9b67e2.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/15.0642a86a.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/16.3cae1767.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/17.ff8e6935.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/18.43522b18.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/19.9f15937c.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/20.f332d0cd.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/21.5a9dd28b.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/22.5739ac9d.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/23.91a3b3c7.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/24.9606909c.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/25.aa9919df.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/26.2bb34d0d.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/27.423be31e.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/28.f7670ad1.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/3.20f71f30.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/30.1409f379.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/31.5ef9ea15.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/32.aa49ea3a.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/33.76003273.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/34.504e7b95.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/35.401858ed.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/36.76cfbe9f.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/37.8ae787a9.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/38.1263da90.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/39.d88b4680.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/4.130f67aa.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/40.62dad8e8.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/41.c9f20a94.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/42.630afdf0.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/43.05d1f30f.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/44.bc79b383.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/45.66388b5d.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/5.6807d7c5.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/6.37166e42.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/7.e2fbbf8a.js"><link rel="prefetch" href="/uncle-novel-official-site/assets/js/vendors~docsearch.94b65286.js">
    <link rel="stylesheet" href="/uncle-novel-official-site/assets/css/0.styles.fa820ce7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/uncle-novel-official-site/" class="home-link router-link-active"><!----> <span class="site-name">📚Uncle小说</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/uncle-novel-official-site/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/download/" class="nav-link">
  下载软件
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/sponsors/" class="nav-link">
  赞助开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="使用指南" class="dropdown-title"><span class="title">使用指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="使用指南" class="mobile-dropdown-title"><span class="title">使用指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uncle-novel-official-site/guide/pc/" class="nav-link">
  电脑版
</a></li><li class="dropdown-item"><!----> <a href="/uncle-novel-official-site/guide/android/" class="nav-link">
  安卓版
</a></li></ul></div></div><div class="nav-item"><a href="/uncle-novel-official-site/booksource/" class="nav-link router-link-active">
  书源教程
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/qa/" class="nav-link">
  常见问题
</a></div> <a href="https://github.com/uncle-novel/uncle-novel-official-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    本站源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/uncle-novel-official-site/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/download/" class="nav-link">
  下载软件
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/sponsors/" class="nav-link">
  赞助开发
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="使用指南" class="dropdown-title"><span class="title">使用指南</span> <span class="arrow down"></span></button> <button type="button" aria-label="使用指南" class="mobile-dropdown-title"><span class="title">使用指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/uncle-novel-official-site/guide/pc/" class="nav-link">
  电脑版
</a></li><li class="dropdown-item"><!----> <a href="/uncle-novel-official-site/guide/android/" class="nav-link">
  安卓版
</a></li></ul></div></div><div class="nav-item"><a href="/uncle-novel-official-site/booksource/" class="nav-link router-link-active">
  书源教程
</a></div><div class="nav-item"><a href="/uncle-novel-official-site/qa/" class="nav-link">
  常见问题
</a></div> <a href="https://github.com/uncle-novel/uncle-novel-official-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    本站源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>书源教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/uncle-novel-official-site/booksource/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/uncle-novel-official-site/booksource/format.html" class="sidebar-link">书源格式</a></li><li><a href="/uncle-novel-official-site/booksource/rule-introduce.html" aria-current="page" class="active sidebar-link">四种规则写法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#xpath规则" class="sidebar-link">Xpath规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#注意事项" class="sidebar-link">注意事项</a></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#一些函数" class="sidebar-link">一些函数</a></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#常用操作符" class="sidebar-link">常用操作符</a></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#写法举例" class="sidebar-link">写法举例</a></li></ul></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#css选择器规则" class="sidebar-link">Css选择器规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#相关拓展" class="sidebar-link">相关拓展</a></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#写法举例-2" class="sidebar-link">写法举例</a></li></ul></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#正则" class="sidebar-link">正则</a></li><li class="sidebar-sub-header"><a href="/uncle-novel-official-site/booksource/rule-introduce.html#jsonpath规则" class="sidebar-link">JsonPath规则</a></li></ul></li><li><a href="/uncle-novel-official-site/booksource/search.html" class="sidebar-link">搜索规则写法</a></li><li><a href="/uncle-novel-official-site/booksource/script.html" class="sidebar-link">预处理脚本</a></li><li><a href="/uncle-novel-official-site/booksource/replace.html" class="sidebar-link">替换净化规则</a></li><li><a href="/uncle-novel-official-site/booksource/advanced.html" class="sidebar-link">进阶写法</a></li><li><a href="/uncle-novel-official-site/booksource/skills.html" class="sidebar-link">常用功能教程</a></li><li><a href="/uncle-novel-official-site/booksource/debug.html" class="sidebar-link">书源调试</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="xpath规则"><a href="#xpath规则" class="header-anchor">#</a> Xpath规则</h2> <p>Xpath基于<a href="https://github.com/zhegexiaohuozi/JsoupXpath" target="_blank" rel="noopener noreferrer">JsoupXpath<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，一个纯Java实现的支持W3C Xpath 1.0标准语法的HTML解析器。</p> <p>如果规则以 <code>//</code> 开头则可以省略不写type。</p> <p>在调试时，可以使用浏览器插件XPath Helper，Chrome浏览器XPath Helper的插件<a href="https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl" target="_blank" rel="noopener noreferrer">下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <p>使用JsoupXpath时如果发现自己写的在XPath Helper中能够正确取值，但是在规则中无法取到</p> <ul><li>查看是否为xpath1.0语法</li> <li>在<a href="https://github.com/zhegexiaohuozi/JsoupXpath/issues" target="_blank" rel="noopener noreferrer">JsoupXpath Issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中查看是否已解决</li></ul> <h3 id="一些函数"><a href="#一些函数" class="header-anchor">#</a> 一些函数</h3> <ul><li><code>allText()</code>提取节点下全部文本，取代类似 <code>//div/h3//text()</code>这种递归取文本用法</li> <li><code>html()</code>获取全部节点的内部的html</li> <li><code>outerHtml()</code>获取全部节点的 包含节点本身在内的全部html</li> <li><code>num()</code>抽取节点自有文本中全部数字，如果知道节点的自有文本(即非子代节点所包含的文本)中只存在一个数字，如阅读数，评论数，价格等那么直接可以直接提取此数字出来。如果有多个数字将提取第一个匹配的连续数字。</li> <li><code>text()</code> 提取节点的自有文本。更多介绍可参见 <a href="https://github.com/zhegexiaohuozi/JsoupXpath/releases/tag/v2.4.1" target="_blank" rel="noopener noreferrer">releases/tag/v2.4.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>node()</code> 提取所有节点</li> <li><code>int position()</code> 返回当前节点在其所在上下文中的位置</li> <li><code>int last()</code> 返回所在上下文的最后那个节点位置</li> <li><code>int first()</code> 返回所在上下文的的第一个节点位置</li> <li><code>string concat(string, string, string*)</code> 连接若干字符串</li> <li><code>boolean contains(string, string)</code> 判断第一个字符串是否包含第二个</li> <li><code>int count(node-set)</code> 计算给定的节点集合中节点个数</li> <li><code>boolean starts-with(string, string)</code> 判断第一个字符串是否以第二个开头</li> <li><code>string substring(string, number, number?)</code> 第一个参数指定字符串，第二个指定起始位置（xpath索引都是从1开始），第三指定要截取的长度，这里要注意在xpath的语法里这，不是结束的位置。substring(&quot;12345&quot;, 2, 3) returns &quot;234&quot;</li></ul> <h3 id="常用操作符"><a href="#常用操作符" class="header-anchor">#</a> 常用操作符</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">MINUS</span><span class="token operator">:</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
<span class="token constant">PLUS</span><span class="token operator">:</span>  <span class="token string">'+'</span><span class="token punctuation">;</span>
<span class="token constant">AT</span><span class="token operator">:</span> <span class="token string">'@'</span><span class="token punctuation">;</span>
<span class="token constant">COMMA</span><span class="token operator">:</span> <span class="token string">','</span><span class="token punctuation">;</span>
<span class="token constant">PIPE</span><span class="token operator">:</span>  <span class="token string">'|'</span><span class="token punctuation">;</span>
<span class="token constant">LESS</span><span class="token operator">:</span>  <span class="token string">'&lt;'</span><span class="token punctuation">;</span>
<span class="token constant">MORE_</span><span class="token operator">:</span>  <span class="token string">'&gt;'</span><span class="token punctuation">;</span>
<span class="token constant">LE</span><span class="token operator">:</span>  <span class="token string">'&lt;='</span><span class="token punctuation">;</span>
<span class="token constant">GE</span><span class="token operator">:</span>  <span class="token string">'&gt;='</span><span class="token punctuation">;</span>
<span class="token constant">START_WITH</span><span class="token operator">:</span>  <span class="token string">'^='</span><span class="token punctuation">;</span>  <span class="token comment">// `a^=b` 字符串a以字符串b开头 a startwith b  （JsoupXpath扩展）</span>
<span class="token constant">END_WITH</span><span class="token operator">:</span>  <span class="token string">'$='</span><span class="token punctuation">;</span>  <span class="token comment">// `a*=b` a包含b, a contains b   （JsoupXpath扩展）</span>
<span class="token constant">CONTAIN_WITH</span><span class="token operator">:</span>  <span class="token string">'*='</span><span class="token punctuation">;</span>  <span class="token comment">// a包含b, a contains b  （JsoupXpath扩展）</span>
<span class="token constant">REGEXP_WITH</span><span class="token operator">:</span>  <span class="token string">'~='</span><span class="token punctuation">;</span>  <span class="token comment">// a的内容符合 正则表达式b   （JsoupXpath扩展）</span>
<span class="token constant">REGEXP_NOT_WITH</span><span class="token operator">:</span>  <span class="token string">'!~'</span><span class="token punctuation">;</span>  <span class="token comment">//a的内容不符合 正则表达式b   （JsoupXpath扩展）</span>
</code></pre></div><h3 id="写法举例"><a href="#写法举例" class="header-anchor">#</a> 写法举例</h3> <div class="language- extra-class"><pre class="language-text"><code>//*[@id=&quot;app&quot;]/div[1]/aside/ul/li[1]/section/ul/li[2]/a@href
</code></pre></div><h2 id="css选择器规则"><a href="#css选择器规则" class="header-anchor">#</a> Css选择器规则</h2> <p>一些使用教程可以查看</p> <ul><li><a href="https://www.w3school.com.cn/cssref/css_selectors.asp" target="_blank" rel="noopener noreferrer">CSS 选择器参考手册 - w3school 在线教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="相关拓展"><a href="#相关拓展" class="header-anchor">#</a> 相关拓展</h3> <p>在软件的规则解析器中，对CSS选择器语法进行了拓展，支持直接选择属性，使用 @属性名 的方式</p> <ul><li>text 选择文本</li> <li>ownText 选择自己标题的文本</li> <li>其他属性直接 @属性名 即可</li></ul> <h3 id="写法举例-2"><a href="#写法举例-2" class="header-anchor">#</a> 写法举例</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- HTML --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">_attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我是一个属性<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是一段文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li>选择对应标签的文本</li></ol> <div class="language- extra-class"><pre class="language-text"><code>.content p@text  得到 “我是一段文字内容”
.content p@ownText 得到 “我是一段文字”
</code></pre></div><ol start="2"><li>选择任意的属性值</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 规则 --&gt;</span>
.content p@_attr 得到 “我是一个属性”
</code></pre></div><h2 id="正则"><a href="#正则" class="header-anchor">#</a> 正则</h2> <p>支持分组选择，采用 <code>##</code> 分割正则与分组，$1代表第一组，$2代表第二组，类推。</p> <p>使用正则必须带有前缀<code>regex:</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配目标</span>
<span class="token number">2013</span>年<span class="token number">5</span>月 
<span class="token comment">// 对应正则规则</span>
<span class="token literal-property property">regex</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token function">年</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">)</span>月##$1<span class="token operator">-</span>$2
<span class="token comment">// 输出</span>
<span class="token number">2013</span><span class="token operator">-</span><span class="token number">5</span>
</code></pre></div><h2 id="jsonpath规则"><a href="#jsonpath规则" class="header-anchor">#</a> JsonPath规则</h2> <p>JsonPath规则实现基于<a href="https://github.com/json-path/JsonPath" target="_blank" rel="noopener noreferrer">JsonPath<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>如果规则以 <code>$.</code> 开头则可以省略不写type字段</p> <p>基本用法如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;store&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;book&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;reference&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Nigel Rees&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sayings of the Century&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">8.95</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 规则</span>
$<span class="token punctuation">.</span>store<span class="token punctuation">.</span>book<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>author
<span class="token comment">// 结果</span>
Nigel Rees
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/uncle-novel/uncle-novel-official-site/edit/main/docs/booksource/rule-introduce.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/11/2022, 7:03:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/uncle-novel-official-site/booksource/format.html" class="prev">
        书源格式
      </a></span> <span class="next"><a href="/uncle-novel-official-site/booksource/search.html">
        搜索规则写法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/uncle-novel-official-site/assets/js/app.36db7c0a.js" defer></script><script src="/uncle-novel-official-site/assets/js/2.705b7372.js" defer></script><script src="/uncle-novel-official-site/assets/js/1.527d975e.js" defer></script><script src="/uncle-novel-official-site/assets/js/29.5c8746bb.js" defer></script>
  </body>
</html>
